[{"title":"sbt安装与仓库设置","url":"https://sustcoder.github.io/2018/09/13/sbt入门/","content":"<h1 id=\"sbt安装\"><a href=\"#sbt安装\" class=\"headerlink\" title=\"sbt安装\"></a>sbt安装</h1><h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><ul>\n<li><code>java 1.8</code></li>\n<li><code>scala 2.12.6</code></li>\n<li><code>sbt 1.2.1</code></li>\n<li><code>idea2.18.3</code><h2 id=\"软件\"><a href=\"#软件\" class=\"headerlink\" title=\"软件\"></a>软件</h2></li>\n<li><code>idea sbt</code>插件</li>\n<li><code>idea scala</code>插件</li>\n<li>sbt安装包 <code>https://sbt-downloads.cdnedge.bluemix.net/releases/v1.2.1/sbt-1.2.1.msi</code>,非必须，可直接使用idea的sbt插件做对应配置<h2 id=\"安装sbt\"><a href=\"#安装sbt\" class=\"headerlink\" title=\"安装sbt\"></a>安装sbt</h2></li>\n</ul>\n<ol>\n<li>新建sbt安装路径，注意：<strong>sbt安装路径中不能含有空格和中文</strong>，将<code>sbt-1.2.1.msi</code>安装到此路径。</li>\n<li>配置环境变量</li>\n</ol>\n<ul>\n<li>新建变量sbt<blockquote>\n<p>SBT_HOME  D:\\ProgramFile\\sbt</p>\n</blockquote>\n</li>\n<li>添加变量到path中<blockquote>\n<p> %SBT_HOME%bin;</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h2><p>修改文件<code>onf/sbtconfig.txt</code>，添加以下内容</p>\n<blockquote>\n<p>-Dfile.encoding=UTF8</p>\n</blockquote>\n<h2 id=\"sbt仓库设置\"><a href=\"#sbt仓库设置\" class=\"headerlink\" title=\"sbt仓库设置\"></a>sbt仓库设置</h2><h3 id=\"方案一\"><a href=\"#方案一\" class=\"headerlink\" title=\"方案一\"></a>方案一</h3><p>直接修改sbt的jar里面的配置文件。<code>windows</code>下可通过360压缩替换掉<code>jar</code>包里面的文件。</p>\n<ol>\n<li>找到sbt安装目录<code>D:\\ProgramFile\\sbt\\bin</code></li>\n<li>备份<code>sbt-launch.jar</code>为<code>sbt-launch.jar.bak</code></li>\n<li>解压<code>sbt-launch.jar.bak</code>,打开个<code>sbt.boot.properties</code>文件</li>\n<li><p>在<code>[repositories]</code>里面的<code>local</code>下面添加以下数据源</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">alirepo1:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/central</span></span><br><span class=\"line\"><span class=\"string\">alirepo2:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/jcenter</span></span><br><span class=\"line\"><span class=\"string\">alirepo3:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/public</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用360压缩打开<code>sbt-launch.jar</code>,找到<code>sbt.boot.properties</code>文件并替换</p>\n</li>\n</ol>\n<h3 id=\"方案二\"><a href=\"#方案二\" class=\"headerlink\" title=\"方案二\"></a>方案二</h3><p>配置sbt的数据源，让其优先加载我们配置的数据源</p>\n<ol>\n<li>在<code>D:\\ProgramFile\\sbt\\conf</code>目录下，新建文件<code>repository.properties</code></li>\n<li><p>在<code>repository.properties</code>中添加以下内容</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">[repositories]</span><br><span class=\"line\">local</span><br><span class=\"line\"><span class=\"string\">alirepo1:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/central</span></span><br><span class=\"line\"><span class=\"string\">alirepo2:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/jcenter</span></span><br><span class=\"line\"><span class=\"string\">alirepo3:</span><span class=\"string\">https:</span><span class=\"comment\">//maven.aliyun.com/repository/public</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>conf/sbtconfig.txt</code>中添加<code>repository.properties</code>文件路径</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"code\"><pre><span class=\"line\">-Dsbt.repository.config=<span class=\"string\">D:</span><span class=\"regexp\">/ProgramFile/</span>sbt<span class=\"regexp\">/conf/</span>repository.properties</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"添加依赖build-sbt\"><a href=\"#添加依赖build-sbt\" class=\"headerlink\" title=\"添加依赖build.sbt\"></a>添加依赖build.sbt</h2><p>在项目中找到<code>build.sbt</code>文件，此类似于<code>maven</code>中的<code>pom</code>文件<br>添加<code>spark-core</code>和<code>spark-sql</code>等的依赖<br><figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><span class=\"line\">name := <span class=\"string\">\"sbt-test\"</span> <span class=\"comment\">// 项目名称</span></span><br><span class=\"line\"></span><br><span class=\"line\">version := <span class=\"string\">\"0.1\"</span> <span class=\"comment\">// 项目版本号</span></span><br><span class=\"line\"></span><br><span class=\"line\">scalaVersion := <span class=\"string\">\"2.11.12\"</span> <span class=\"comment\">// scala版本号</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 依赖</span></span><br><span class=\"line\">libraryDependencies ++= Seq(</span><br><span class=\"line\">  <span class=\"string\">\"org.apache.spark\"</span>  %%  <span class=\"string\">\"spark-core\"</span>    % <span class=\"string\">\"2.2.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"org.apache.spark\"</span>  %%  <span class=\"string\">\"spark-sql\"</span>     % <span class=\"string\">\"2.2.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"com.typesafe.scala-logging\"</span> % <span class=\"string\">\"scala-logging-slf4j_2.11\"</span> % <span class=\"string\">\"latest.integration\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"下载依赖\"><a href=\"#下载依赖\" class=\"headerlink\" title=\"下载依赖\"></a>下载依赖</h2><p>通过以下方式打开执行命令窗口</p>\n<ul>\n<li>在<code>build.sbt</code>同级目录下打开<code>cmd</code>窗口</li>\n<li>在<code>idea</code>中打开<code>Termail</code>窗口</li>\n</ul>\n<p>下载或更新jar</p>\n<blockquote>\n<p>sbt update</p>\n</blockquote>\n<p>编译文件</p>\n<blockquote>\n<p>sbt compile</p>\n</blockquote>\n<p>打包</p>\n<blockquote>\n<p>sbt package</p>\n</blockquote>\n<h1 id=\"问题处理\"><a href=\"#问题处理\" class=\"headerlink\" title=\"问题处理\"></a>问题处理</h1><h2 id=\"版本不兼容\"><a href=\"#版本不兼容\" class=\"headerlink\" title=\"版本不兼容\"></a>版本不兼容</h2><h3 id=\"jdk不兼容\"><a href=\"#jdk不兼容\" class=\"headerlink\" title=\"jdk不兼容\"></a>jdk不兼容</h3><ul>\n<li><code>idea2018</code>需要<code>jdk8</code>以上</li>\n<li><code>spark2.0</code>需要<code>jdk8</code>以上<h2 id=\"文件下载缓慢\"><a href=\"#文件下载缓慢\" class=\"headerlink\" title=\"文件下载缓慢\"></a>文件下载缓慢</h2><code>idea</code>控制台<code>build</code>界面一直在转圈,并提示<code>dump project structure from sbt</code></li>\n</ul>\n<p>这里需要注意，在<code>Intellij Idea</code>启动时，会执行<code>dump project structure from sbt</code>的操作，也就是把sbt所需要的项目结构从远程服务器拉取到本地，在本地会生成sbt所需要的项目结构。由于是从国外的远程服务器下载，所以，这个过程很慢，笔者电脑上运行了15分钟。这个过程没有结束之前，上图中的<code>File-&gt;New</code>弹出的子菜单是找不到<code>Scala Class</code>这个选项的。所以，一定要等<code>dump project structure from sbt</code>的操作全部执行结束以后，再去按照上图操作来新建<code>Scala Class</code>文件。</p>\n<h2 id=\"修改sbt数据源\"><a href=\"#修改sbt数据源\" class=\"headerlink\" title=\"修改sbt数据源\"></a>修改sbt数据源</h2><h3 id=\"不靠谱方案\"><a href=\"#不靠谱方案\" class=\"headerlink\" title=\"不靠谱方案\"></a>不靠谱方案</h3><ol>\n<li>将数据源改为<code>maven.oschina.com</code>。此数据源已经失效</li>\n<li>将<code>sbt.boot.properties</code>中的<code>https</code>改为<code>http</code>。未生效</li>\n<li>在<code>sbt</code>的<code>vm</code>中配置<code>-Dsbt.override.build.repos=true</code>。此方法效果和<code>-Dsbt.repository.config=D:/ProgramFile/sbt/conf/repository.properties</code>一致，前提是需要配置数据源</li>\n<li>最笨方案，下载jar包，放到本地仓库<code>C:\\Users\\suning\\.ivy2\\cache</code></li>\n</ol>\n<h3 id=\"修改成阿里云数据源后依旧下载失败\"><a href=\"#修改成阿里云数据源后依旧下载失败\" class=\"headerlink\" title=\"修改成阿里云数据源后依旧下载失败\"></a>修改成阿里云数据源后依旧下载失败</h3><ul>\n<li>配置的<code>sbt</code>版本在阿里云的仓库中没有。排查办法：可以去<code>maven.aliyun.com</code>去查看对应版本pom文件是否存在</li>\n<li>在阿里云上找到了对应版本但依旧保持。注意查看日志信息中下载的jar包路径含有<code>_2.10</code>类似的字样，比如在<code>build.sbt</code>中配置的是<code>&quot;org.apache.spark&quot;  %%  &quot;spark-sql&quot;     % &quot;2.2.0&quot;</code>,但是日志里面是<code>[warn]  :: com.typesafe.scala-logging#scala-sql_2.10;2.1.2: not found</code>,这个是因为sbt里面的<code>%%</code>代表sbt默认会拼接上scala的版本号在pom文件上，下载最适合的jar包，可以将<code>%%</code>改为<code>%</code>，即改为<code>&quot;org.apache.spark&quot;  %  &quot;spark-sql&quot;     % &quot;2.2.0&quot;</code>,注意区别：仅仅是少了一个百分号。</li>\n<li>执行<code>sbt-shell</code>会走默认的仓库配置，需要在sbt的vm参数中配置<code>-Dsbt.override.build.repos=true</code> ????<h2 id=\"查看配置参数是否生效\"><a href=\"#查看配置参数是否生效\" class=\"headerlink\" title=\"查看配置参数是否生效\"></a>查看配置参数是否生效</h2>可在日志控制台查看第一行日志，查看配置参数是否生效，走的是自己安装的sbt还是idea的插件,如下日志，在<code>sbtconfig.txt</code>中配置信息会进行加载<figure class=\"highlight routeros\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"C:\\Program Files\\Java\\jdk8\\bin\\java.exe\"</span> -agentlib:<span class=\"attribute\">jdwp</span>=transport=dt_socket,address=localhost:58502,suspend=n,server=y -Xdebug -server -Xmx1536M </span><br><span class=\"line\">-Dsbt.repository.<span class=\"attribute\">config</span>=D:/develop/sbt/conf/repository.properties -Didea.<span class=\"attribute\">managed</span>=<span class=\"literal\">true</span> -Dfile.<span class=\"attribute\">encoding</span>=UTF-8 </span><br><span class=\"line\">-Didea.<span class=\"attribute\">runid</span>=2018.2 -jar D:\\ProgramFile\\sbt\\bin\\sbt-launch.jar idea-shell</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>参考链接</strong></p>\n<p><a href=\"https://www.scala-sbt.org/0.13/docs/Proxy-Repositories.html\" target=\"_blank\" rel=\"noopener\">https://www.scala-sbt.org/0.13/docs/Proxy-Repositories.html</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000002484978\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000002484978</a></p>\n","categories":["spark"],"tags":["sbt"]},{"title":"Hello World","url":"https://sustcoder.github.io/2018/09/10/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","categories":[],"tags":[]},{"title":"about","url":"https://sustcoder.github.io/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"https://sustcoder.github.io/category/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"https://sustcoder.github.io/life/index.html","content":"<html>\n\t<head>\n\t\t<title>胖斯世界</title>\n\t\t<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\n\t\t<style type=\"text/css\">\n\t\t\t\nbody {\n\tmargin: 0px 0px;\n\tpadding: 0px 0px;\n\toverflow: hidden;\n}\n\ndiv {\n\tcolor: #fff;\n}\n\n.space {\n\tbackground : #000;\n\twidth : 100%;\n\theight : 100%;\n}\n\n.space  div{\n\ttop:50%;\n\tleft:50%;\n\tposition:absolute;\n}\n\n.container {\n\n\tbackground : #888;\n\t\n    animation-play-state: running;\n    -webkit-animation-play-state: running;    \n}\n\n.container:hover {\n\n\tbackground : #eee;\n\t\n    animation-play-state: paused;\n    -webkit-animation-play-state: paused;\n\t\n\ttransition: 3s;\n}\n\n#all-container {\n\n\tbackground : #0f0f0f;\n\n    -moz-border-radius: 400px;\n    -webkit-border-radius: 400px;\n    border-radius: 400px;\n\t\n\twidth : 800px;\n\theight : 800px;\n\tmargin-left:-400px;\n\tmargin-top:-400px;\n\t\n\n    animation: spin 80s linear infinite;\n    -webkit-animation: spin 80s linear infinite;\n\t\n}\n\n#all-container:hover,\n#family-container:hover,\n#me-container:hover,\n#wife-container:hover,\n#child-container:hover {\n\n    animation-play-state: paused;\n    -webkit-animation-play-state: paused;\n\t\n}\n\n#family-container {\n\n    -moz-border-radius: 120px;\n    -webkit-border-radius: 120px;\n    border-radius: 120px;\n\t\n\twidth : 240px;\n\theight : 240px;\n\tmargin-left:-120px;\n\tmargin-top:-120px;\n\t\n    animation: spin 40s linear infinite;\n    -webkit-animation: spin 40s linear infinite;\n\t\n\tbackground-image:url(https://sustblog.oss-cn-beijing.aliyuncs.com/blog/2018/life/myworld/wife.jpg);\n}\n\n#family {\n\n\twidth : 180px;\n\theight : 180px;\n\tmargin-left:-90px;\n\tmargin-top:-90px;\n\tfont-size: 50;\n\tfont-weight:300;\n\t\n}\n\n#family .words {\n\tdisplay:none;\n\tmargin-left:-90px;\n\tmargin-top:90px;\n}\n\n#family:hover .words {\n\tdisplay:block;\n}\n\n#wife-container {\n\n    -moz-border-radius: 40px;\n    -webkit-border-radius: 40px;\n    border-radius: 40px;\n\t\n\twidth : 70px;\n\theight : 70px;\n\tmargin-left:-330px;\n\tmargin-top:-30px;\n\t\n    animation: spin 10s linear infinite;\n    -webkit-animation: spin 15s linear infinite;\n\t\n\tbackground-image:url(https://sustblog.oss-cn-beijing.aliyuncs.com/blog/2018/life/myworld/me.jpg);\n}\n\n#wife {\n\n\twidth : 40px;\n\theight : 40px;\n\tmargin-left:-30px;\n\tmargin-top:-30px;\n\tfont-size:20;\n\tfont-weight:300;\n}\n\n#wife .words {\n\tdisplay:none;\n\tmargin-left:-50px;\n\tmargin-top:50px;\n}\n\n#wife:hover .words {\n\tdisplay:block;\n}\n\n#child-container {\n\n    -moz-border-radius: 20px;\n    -webkit-border-radius: 20px;\n    border-radius: 20px;\n\t\n\twidth : 40px;\n\theight : 40px;\n\tmargin-left:-330px;\n\tmargin-top:15px;\n\t\n    animation: spin 5s linear infinite;\n    -webkit-animation: spin 5s linear infinite;\n\t\n\tbackground-image:url(https://sustblog.oss-cn-beijing.aliyuncs.com/blog/2018/life/myworld/child.jpg);\n}\n\n#child {\n\n\twidth : 30px;\n\theight : 30px;\n\tmargin-left:-15px;\n\tmargin-top:-15px;\n\tfont-size:15;\n\tfont-weight:300;\n}\n\n#child .words {\n\tdisplay:none;\n\tmargin-left:-30px;\n\tmargin-top:30px;\n}\n\n#child:hover .words {\n\tdisplay:block;\n}\n\n@keyframes spin {\n\tto {\n\t\t-webkit-transform: rotate(1turn);\n\t\t-ms-transform: rotate(1turn);\n\t}\n}\n\n@-webkit-keyframes spin {\n\tto {\n\t\t-webkit-transform: rotate(1turn);\n\t\t-ms-transform: rotate(1turn);\n\t}\n}\n\n\n\n\t  </style>\n\t</head>\n\t<body>\n\t\t<div class=\"space\">\n\t\t\t<div class=\"container\" id=\"all-container\">\n\t\t\t\t<div class=\"container\" id=\"family-container\">\n\t\t\t\t\t<div id=\"family\" alt=\"菲菲\">\n\t\t\t\t\t\t<div class=\"words\">菲菲</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"container\" id=\"wife-container\">\n\t\t\t\t\t<div id=\"wife\" alt=\"胖斯\">\n\t\t\t\t\t\t<div class=\"words\">胖斯</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"container\" id=\"child-container\">\n\t\t\t\t\t<div id=\"child\" alt=\"小可爱\">\n\t\t\t\t\t\t<div class=\"words\">小可爱</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</body>\n</html>\n\n","categories":[],"tags":[]},{"title":"link","url":"https://sustcoder.github.io/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"https://sustcoder.github.io/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"https://sustcoder.github.io/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"https://sustcoder.github.io/tag/index.html","content":"","categories":[],"tags":[]}]